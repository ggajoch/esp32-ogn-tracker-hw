Version 4
SHEET 1 880 940
WIRE -240 -32 -336 -32
WIRE 48 -32 -160 -32
WIRE 256 -32 48 -32
WIRE 368 -32 352 -32
WIRE 448 -32 368 -32
WIRE 576 -32 448 -32
WIRE 688 -32 576 -32
WIRE -336 -16 -336 -32
WIRE 688 0 688 -32
WIRE 448 16 448 -32
WIRE 576 16 576 -32
WIRE 368 32 368 -32
WIRE 48 64 48 -32
WIRE 112 64 48 64
WIRE 272 64 272 16
WIRE 272 64 192 64
WIRE -336 96 -336 64
WIRE 448 112 448 80
WIRE 576 112 576 80
WIRE 688 128 688 80
WIRE 48 144 48 64
WIRE 112 144 48 144
WIRE 272 144 272 64
WIRE 272 144 176 144
WIRE 368 144 368 96
WIRE 368 144 272 144
WIRE -336 192 -336 176
WIRE 272 208 272 144
WIRE -464 320 -464 304
WIRE 272 336 272 288
WIRE 384 336 272 336
WIRE -752 384 -752 368
WIRE -464 384 -464 320
WIRE -752 448 -752 384
WIRE 272 448 272 336
WIRE 272 448 256 448
WIRE -176 464 -176 448
WIRE 112 464 80 464
WIRE 256 464 256 448
WIRE -176 496 -176 464
WIRE -464 512 -464 464
WIRE -208 512 -464 512
WIRE -752 544 -752 528
WIRE -608 544 -752 544
WIRE -352 544 -528 544
WIRE -208 544 -352 544
WIRE -144 544 -144 528
WIRE -64 544 -144 544
WIRE 32 544 -64 544
WIRE 112 544 112 464
WIRE 144 544 112 544
WIRE 208 544 144 544
WIRE -752 560 -752 544
WIRE -464 576 -464 512
WIRE -176 656 -176 560
WIRE -752 688 -752 624
WIRE -464 688 -464 656
WIRE -352 736 -352 544
WIRE -208 736 -352 736
WIRE 384 736 384 336
WIRE 384 736 -128 736
FLAG -336 192 0
FLAG 448 112 0
FLAG 576 112 0
FLAG 576 -32 out
FLAG 48 -32 vin
FLAG -336 -32 batt
FLAG 688 128 0
FLAG 272 144 gate
FLAG -464 688 0
FLAG -752 688 0
FLAG -752 544 ref
FLAG -176 656 0
FLAG 80 560 0
FLAG 256 560 0
FLAG -64 464 vin
FLAG -464 320 vin
FLAG -752 384 vin
FLAG -176 464 vin
FLAG 144 464 vin
SYMBOL pmos 352 16 M270
SYMATTR InstName M1
SYMATTR Value FDS4953
SYMBOL res 208 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 288 304 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 51k
SYMBOL cap 176 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL res -144 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 0.1
SYMBOL voltage -336 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
WINDOW 0 38 51 Left 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName V1
SYMATTR Value PULSE(0 14 0 10 10 1 3)
SYMBOL cap 432 16 R0
SYMATTR InstName C3
SYMATTR Value 680µF
SYMATTR SpiceLine Rser=100m
SYMBOL cap 560 16 R0
SYMATTR InstName C4
SYMATTR Value 1µF
SYMATTR SpiceLine Rser=10m
SYMBOL res 672 -16 R0
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res -480 368 R0
SYMATTR InstName R6
SYMATTR Value 800k
SYMBOL res -480 560 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL cap 352 32 R0
SYMATTR InstName C2
SYMATTR Value 100nF
SYMBOL References\\LT1634-1.25 -752 592 R0
SYMATTR InstName U1
SYMBOL res -768 432 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL Comparators\\LT1017 -176 528 R0
SYMATTR InstName U2
SYMBOL res -512 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 15k
SYMBOL res -112 720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2Meg
SYMBOL voltage -336 -32 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName V2
SYMATTR Value SINE(0 0.3 100 0 0 0 0)
SYMBOL nmos 32 464 R0
WINDOW 3 56 72 Left 0
SYMATTR Value 2N7002
SYMATTR InstName M2
SYMBOL nmos 208 464 R0
WINDOW 3 56 72 Left 0
SYMATTR Value 2N7002
SYMATTR InstName M3
SYMBOL res -80 448 R0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res 128 448 R0
SYMATTR InstName R11
SYMATTR Value 100k
TEXT -232 -200 Left 2 !.tran 0 21 0 100u uic
